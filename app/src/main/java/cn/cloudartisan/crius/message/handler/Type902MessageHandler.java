/**
  * Generated by smali2java 1.0.0.558
  * Copyright (C) 2013 Hensence.com
  */

package cn.cloudartisan.crius.message.handler;

import android.content.Context;
import cn.cloudartisan.crius.bean.Message;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import cn.cloudartisan.crius.bean.Friend;
import cn.cloudartisan.crius.db.FriendDBManager;
import android.content.Intent;
import cn.cloudartisan.crius.bean.MessageItemSource;

public class Type902MessageHandler implements CustomMessageHandler {
    
    public boolean handle(Context context, Message message) {
        JSONObject json = JSON.parseObject(message.content);
        String account = json.getString("sourceAccount");
        String name = json.getString("name");
        String motto = json.getString("motto");
        Friend friend = new Friend();
        friend.name = name;
        friend.account = account;
        FriendDBManager.getManager().modifyNameAndMotto(account, name, motto);
        Intent intent = new Intent();
        intent.setAction("com.farsunset.cim.UPDATE_ITEM");
        intent.putExtra(MessageItemSource.class.getName(), friend);
        context.sendBroadcast(intent);
        return false;
    }
}
