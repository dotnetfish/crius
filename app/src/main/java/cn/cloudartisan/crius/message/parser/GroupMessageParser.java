/**
  * Generated by smali2java 1.0.0.558
  * Copyright (C) 2013 Hensence.com
  */

package cn.cloudartisan.crius.message.parser;

import com.alibaba.fastjson.JSON;
import cn.cloudartisan.crius.adapter.SystemMsgListViewAdapter;
import cn.cloudartisan.crius.app.Global;
import cn.cloudartisan.crius.bean.Message;
import cn.cloudartisan.crius.bean.MessageItemSource;
import cn.cloudartisan.crius.db.GroupDBManager;

import java.util.HashMap;

public class GroupMessageParser extends MessageParser {
    
    public MessageItemSource getMessageItemSource(Message msg) {
        if("1".equals(msg.type)) {
            return GroupDBManager.getManager().queryGroup(msg.receiver);
        }
      return GroupDBManager.getManager().queryGroup(msg.sender);

    }
    
    public HashMap<String, Object> decodeContent(Message message) {
        return null;
    }
    
    public void displayInSysMsgListView(SystemMsgListViewAdapter.MessageViewHolder holder, Message message) {
    }
    
    public void encodeContent(HashMap data) {
    }
    
    public String getMessagePreview(Message message) {
        String name = "";
        if(message.receiver.equals(Global.getCurrentUser().getAccount())) {
            String content = JSON.parseObject(message.content).getString("content");
            name = "\uff1a";
            message.content = content;
        }
        return MessageParserFactory.getPreviewText(message);
    }
}
